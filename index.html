<!DOCTYPE html>
<!-- 
This file for github pages
see https://labneurocogdevel.github.io/slipstask
-->
<html>
  <head>
    <meta charset="UTF-8">
    <title>Fabulious Fruits</title>
    <!-- all of this also in ./templates/exp.html -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="static/js/jspsych/css/jspsych.css" type="text/css" />
    <link rel="stylesheet" href="static/css/style.css" type="text/css" />
    <link rel="stylesheet" href="static/css/task.css" type="text/css" />
    <script src="static/lib/jquery-3.4.1.min.js" type="text/javascript"> </script>
    <script src="static/lib/underscore-min.js" type="text/javascript"> </script>
    <script src="static/lib/backbone-min.js" type="text/javascript"> </script>
    <script src="static/lib/d3.v3.min.js" type="text/javascript"> </script>
    <script src="static/js/jspsych/jspsych.js" type="text/javascript"></script>
    <script src="static/js/jspsych/plugins/jspsych-instructions.js" type="text/javascript"></script>
    <script src="static/js/jspsych/plugins/jspsych-html-keyboard-response.js" type="text/javascript"></script>
    <script src="static/js/jspsych/plugins/jspsych-survey-text.js" type="text/javascript"></script>
    <script src="static/js/jspsych/plugins/jspsych-survey-multi-choice.js" type="text/javascript"></script>
    <script src="static/js/utils.js" type="text/javascript"> </script>
    <script src="static/js/task.js" type="text/javascript"> </script>

    <script type="text/javascript">

// combine all for full timeline
fullTL = [
    //mkInstruction(INSTRUCTIONS_DATA["ID_wf"]),
    allID,
    //mkInstruction(INSTRUCTIONS_DATA["OD_wf"]),
    allOD,
    //mkInstruction(INSTRUCTIONS_DATA["SOA_wf"]),
    allSOA,
   // mkInstruction(INSTRUCTIONS_DATA["DD_wf"]),
    allDD].flat()

//var timeline = [get_info, fullTL].flat()

/* small versions for exploring */
const scoretl = mkScoreFbk(); // tl = timeline
IDTL   = [allID.slice(0,4), scoretl].flat();
ODTL   = [allOD.slice(0,2), scoretl].flat();
SOATL  = [allSOA.slice(0,3), scoretl].flat();
DDTL  =  [allDD.slice(0,3), scoretl].flat();

function trials(timeline){
  jsPsych.init({timeline: timeline,
		display_element: jsp,
		on_finish: function() {
		    trials(timeline)}});
}

function showInstructions(inst){
   const inst_str = INSTRUCTIONS_DATA[inst];
   console.log(inst_str)
   var inst_t = mkInstruction(inst_str);
   trials([inst_t]);
}


function init(){ trials(fullTL); }
    </script>

  </head>

  <body onload="init()">
    <div> links:
      <a href="https://github.com/LabNeuroCogDevel/slipstask"> repo</a> |
      <a href="https://sliplncd.herokuapp.com/"> heroku (DNE!)</a>
    </div>
    <div> trials:
      <a href="#" onclick="trials(fullTL)"> fulltask </a> |
      <a href="#" onclick="trials(IDTL)"> ID</a> |
      <a href="#" onclick="trials(ODTL)"> OD</a> |
      <a href="#" onclick="trials(SOATL)"> SOA</a> |
      <a href="#" onclick="trials(DDTL)"> DD</a> |
    </div>
    <div> instructions:
      <a href="#" onclick="showInstructions('ID')"> ID</a> |
      <a href="#" onclick="showInstructions('OD')"> OD</a> |
      <a href="#" onclick="showInstructions('SOA')"> SOA</a> |
      <a href="#" onclick="showInstructions('DD')"> DD</a> |
       WF ver:
      <a href="#" onclick="showInstructions('ID_wf')"> ID</a> |
      <a href="#" onclick="showInstructions('OD_wf')"> OD</a> |
      <a href="#" onclick="showInstructions('SOA_wf')"> SOA</a> |
      <a href="#" onclick="showInstructions('DD_wf')"> DD</a> |
    </div>
    <br><br>
    <div>
      <div id="jsp"> </div>
    </div>
  </body>
</html>
